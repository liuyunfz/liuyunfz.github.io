<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/liuyunfz/liuyunfz.github.io/img/favicon.ico">
  <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/liuyunfz/liuyunfz.github.io/img/favicon.ico">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">

  
    <meta name="description" content="åˆ†æè¶…æ˜Ÿï¼ˆå­¦ä¹ é€šï¼‰çš„ç½‘ç»œåè®®ï¼Œåˆ©ç”¨pythonå®ç°ä¸€é”®åˆ·è¯¾ç¨‹è§†é¢‘ã€‚">
  

  <!--ä»¥ä¸Šæ·»åŠ äº†descriptionä»£ç -->
  <!--meta name="description" content="ä¸€ä¸ªä¿¡æ¯ç½‘ç»œçˆ±å¥½è€…çš„åšå®¢ï¼Œå°†é‡åˆ°çš„é—®é¢˜ä¸è§£å†³è¿‡ç¨‹ç•™äºæ­¤ï¼Œå¦‚æœèƒ½å¯¹æ¥è®¿çš„æ‚¨æœ‰æ‰€å¸®åŠ©æ˜¯æˆ‘çš„è£å¹¸ï¼Œæ¬¢è¿è”ç³»æˆ‘å¹¶ä¸æˆ‘äº¤æµè®¨è®ºã€‚"-->
  <meta name="author" content="Liu Yun">
  <meta name="keywords" content="hexo,ä¸ªäººåšå®¢,yilia,python,4399,spider">
  <title>è¶…æ˜Ÿå­¦ä¹ é€šç½‘è¯¾åˆ†æ | LiuYunçš„åšå®¢</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.18.1/styles/monokai.min.css" />


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_fmb4a04yx8h.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1763598_pox2yzz0etj.css">




<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->

  
<link rel="stylesheet" href="/css/custom.css">



<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <div id="dark" onclick="switchDarkMode()"></div>
  <script>
    var isNight = new Date().getHours() >= 22 || new Date().getHours() < 7;
    if( matchMedia('(prefers-color-scheme: dark)').matches || isNight || localStorage.getItem('dark') === '1') {
      if(!(isNight&&localStorage.getItem('noDark') === '1')) {
        document.body.classList.add('dark');
      }
    }
    document.getElementById('dark').innerHTML = document.querySelector("body").classList.contains("dark")?"ğŸŒ™":"ğŸŒ";
  </script>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>LiuYunçš„åšå®¢</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">
              <i class="iconfont icon-home-fill"></i>
              é¦–é¡µ</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">
              <i class="iconfont icon-archive-fill"></i>
              å½’æ¡£</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">
              <i class="iconfont icon-tags-fill"></i>
              æ ‡ç­¾</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/links/">
              <i class="iconfont icon-link-fill"></i>
              å‹é“¾</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/function/">
              <i class="iconfont iconfunction"></i>
              åŠŸèƒ½</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/history/">
              <i class="iconfont iconbook"></i>
              å†ç¨‹</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">
              <i class="iconfont icon-user-fill"></i>
              å…³äº</a>
          </li>
        
        <li class="nav-item">
        <a class="nav-link" href="https://travellings.now.sh/" target="blank" title="å¼€å¾€-å‹é“¾æ¥åŠ›"><i class="iconfont iconfly" alt="å¼€å¾€-å‹é“¾æ¥åŠ›" width="120"></i></a>
        </li>
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
                <div class="mt-3 post-meta">
                  <i class="iconfont icon-date-fill" aria-hidden="true"></i>
                  <time datetime="2020-11-13 21:54">
                    2020 åä¸€æœˆ 13æ—¥ , æ˜ŸæœŸäº” , 9:54 æ™šä¸Š
                  </time>
                </div>
              

              <div class="mt-1">
                
                  
                  <span class="post-meta mr-2">
                    <i class="iconfont icon-chart"></i>
                    5.7k å­—
                  </span>
                

                
                  
                  <span class="post-meta mr-2">
                      <i class="iconfont icon-clock-fill"></i>
                    
                    
                    74
                     åˆ†é’Ÿ
                  </span>
                

                
                  <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
                  
                  <span id="busuanzi_container_page_pv" class="post-meta" style="display: none">
                    <i class="iconfont icon-eye" aria-hidden="true"></i>
                    <span id="busuanzi_value_page_pv"></span> æ¬¡
                  </span>
                
              </div>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
              <p class="note note-warning">
                æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2020 åä¸€æœˆ 21æ—¥ , æ˜ŸæœŸå…­ , 11:03 ä¸Šåˆ
              </p>
            
          <article class="markdown-body">
            <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä½œä¸ºä¸€ä¸ªåˆšæ­¥å…¥å¤§å­¦çš„æ–°ç”Ÿï¼Œè·Ÿå…¨å›½å¹¿å¤§çš„å¤§å­¦ç”Ÿä¸€æ ·ï¼Œä¹Ÿå—åˆ°äº†æ¥è‡ªå„ç§å­¦ä¹ è½¯ä»¶çš„è¿«å®³ï¼Œâ€œè¶…æ˜Ÿâ€å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚å› ä¸ºç–«æƒ…åŠå„ç§å­¦æ ¡å½“åœ°åŸå› ï¼Œæˆ‘ä»¬å­¦æ ¡å†³å®šäºåæœˆå¼€å­¦ï¼Œäºæ˜¯ä¹Ÿå°±å¤šäº†ä¸€ä¸ªå¤šæœˆçš„çº¿ä¸Šå­¦ä¹ æ—¶é—´ã€‚é€šè¿‡å„ç§è…¾è®¯è¯¾å ‚ï¼Œé’‰é’‰ï¼Œè…¾è®¯ä¼šè®®ï¼Œå­¦ä¹ é€šç­‰ç­‰è¿›è¡Œç½‘ç»œæˆè¯¾ã€‚æœŸé—´ä¹Ÿé‡åˆ°äº†å„ç§å®£ä¼ ä»£åˆ·ç½‘è¯¾çš„ï¼Œæœ¬ç€ä»¥é”»ç‚¼è‡ªå·±çˆ¬è™«å®åŠ›ä¸ºç›®çš„ï¼Œåœ¨é—²æš‡ä¹‹ä½™å¼€å§‹ç ”ç©¶è¶…æ˜Ÿçš„ç½‘ç»œåè®®ï¼ˆä¸»è¦ä¸Šé¢æœ‰å¥½å¤šå­¦ä¹ è§†é¢‘ä»»åŠ¡éœ€è¦å®Œæˆï¼‰ã€‚<br>åœ¨æ­¤ä¹Ÿå£°æ˜ä¸€ä¸‹ï¼Œæœ¬æ•™ç¨‹ä»…ä¾›å­¦ä¹ ï¼Œè¯·å‹¿ç”¨äºéæ³•å•†ä¸šç”¨é€”ã€‚åˆ·è¯¾ä¸€æ—¶çˆ½ï¼Œä½†ä¹Ÿä¸è¦å¿˜äº†æŒæ¡å¥½çŸ¥è¯†ï¼Œæœç»æŒ‚ç§‘ã€‚</p>
<h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><h2 id="ç™»é™†"><a href="#ç™»é™†" class="headerlink" title="ç™»é™†"></a>ç™»é™†</h2><h3 id="ç½‘é¡µåˆ†æ"><a href="#ç½‘é¡µåˆ†æ" class="headerlink" title="ç½‘é¡µåˆ†æ"></a>ç½‘é¡µåˆ†æ</h3><p>è¶…æ˜Ÿå¹³å°çš„æ—§ç‰ˆç™»é™†æ˜¯éœ€è¦éªŒè¯ç çš„<img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/1.png" srcset="/img/loading.gif" alt="old_sign_in"><br>ç„¶è€Œé€šè¿‡æ–°ç‰ˆè¿›å»å´ä¸éœ€è¦ç›´æ¥è¾“å…¥éªŒè¯ç ï¼ˆå°šæœªæµ‹è¯•è¿‡å¤šæ¬¡å¯†ç é”™è¯¯åæ˜¯å¦ä¼šå‡ºç°éªŒè¯ç ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/2.png" srcset="/img/loading.gif" alt="new_sign_in"><br>æœ¬ç€èƒ½ç®€åŒ–å°±ç®€åŒ–çš„ç†å¿µï¼ˆä¸»è¦æ˜¯æ‡’ï¼‰ï¼Œæˆ‘ä»¬ç›´æ¥æŠ“å–è¿™ä¸ªæ–°ç‰ˆçš„ç™»é™†é¡µé¢ã€‚<a href="https://passport2.chaoxing.com/login?fid=&newversion=true&refer=http%3A%2F%2Fi.chaoxing.com" target="_blank" rel="noopener">https://passport2.chaoxing.com/login?fid=&amp;newversion=true&amp;refer=http%3A%2F%2Fi.chaoxing.com</a><br>å°è¯•ç™»é™†ï¼Œè€å¥—è·¯äº†ï¼Œé¿å…ç™»é™†æˆåŠŸåè·³è½¬å‡ºç°å¾ˆå¤šåŒ…ï¼Œæˆ‘ä»¬ç›´æ¥è¾“å…¥é”™è¯¯çš„ç™»é™†ä¿¡æ¯ã€‚ç»“æœå¾ˆç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œåªå¤šå‡ºäº†ä¸€ä¸ªåŒ…<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/3.png" srcset="/img/loading.gif" alt="post_sign_in"><br>æŸ¥çœ‹é¢„è§ˆï¼Œæ­£å¥½æ˜¯æç¤ºæˆ‘ä»¬çš„â€œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯â€ï¼Œæˆ‘ä»¬æŸ¥çœ‹æäº¤çš„è¡¨å•ï¼Œä¸€ä¸ªä¸ªæ¥åˆ†æã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/4.png" srcset="/img/loading.gif" alt="post_form_sign_in"></p>
<div class="hljs"><pre><code class="hljs plain">fid: -1
uname: 11011110010
password: bGl1eXVuZno&#x3D;
refer: http%3A%2F%2Fi.chaoxing.com
t: true</code></pre></div>
<p>ä¸ç®¡fidï¼Œ-1åº”è¯¥æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚unameæ­£å¥½æ˜¯æˆ‘ä»¬è¾“å…¥çš„æ‰‹æœºå·ã€‚passwordç»“å°¾æœ‰â€œ=â€ï¼Œæˆ‘ä»¬å¤§èƒ†çŒœæµ‹æ˜¯base64ç¼–ç <br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/5.png" srcset="/img/loading.gif" alt="post_form_password"><br>æ­£å¥½æ˜¯æˆ‘ä»¬è¾“å…¥çš„å¯†ç ï¼Œé‚£ä¹ˆpasswordä¹Ÿæå®šäº†ã€‚tæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä¹Ÿä½œä¸ºå¸¸é‡ï¼Œreferæˆ‘å°±ä¸å¤šè§£é‡Šäº†ï¼Œä¹ŸæŠŠå®ƒä½œä¸ºå¸¸é‡å§ã€‚</p>
<h3 id="ä»£ç æ’°å†™"><a href="#ä»£ç æ’°å†™" class="headerlink" title="ä»£ç æ’°å†™"></a>ä»£ç æ’°å†™</h3><p>ç…§ç€æˆ‘ä»¬çš„åˆ†æï¼Œæˆ‘ä»¬å°è¯•åˆ©ç”¨pythonä»£ç æ¨¡æ‹Ÿæˆ‘ä»¬çš„ç™»é™†æ“ä½œã€‚</p>
<div class="hljs"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests,base64
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sign_in</span><span class="hljs-params">(username:str,password:str)</span>:</span>
    url=<span class="hljs-string">"https://passport2.chaoxing.com/fanyalogin"</span>
    headers=&#123;
        <span class="hljs-string">'Accept'</span>:<span class="hljs-string">'application/json, text/javascript, */*; q=0.01'</span>,
        <span class="hljs-string">'Accept-Encoding'</span>:<span class="hljs-string">'gzip, deflate, br'</span>,
        <span class="hljs-string">'Accept-Language'</span>:<span class="hljs-string">'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'</span>,
        <span class="hljs-string">'Connection'</span>:<span class="hljs-string">'keep-alive'</span>,
        <span class="hljs-string">'Content-Length'</span>:<span class="hljs-string">'95'</span>,
        <span class="hljs-string">'Content-Type'</span>:<span class="hljs-string">'application/x-www-form-urlencoded; charset=UTF-8'</span>,
        <span class="hljs-string">'Cookie'</span>:<span class="hljs-string">''</span>,
        <span class="hljs-string">'Host'</span>:<span class="hljs-string">'passport2.chaoxing.com'</span>,
        <span class="hljs-string">'Origin'</span>:<span class="hljs-string">'https://passport2.chaoxing.com'</span>,
        <span class="hljs-string">'Referer'</span>:<span class="hljs-string">'https://passport2.chaoxing.com/login?fid=&amp;newversion=true&amp;refer=http%3A%2F%2Fi.chaoxing.com'</span>,
        <span class="hljs-string">'Sec-Fetch-Dest'</span>:<span class="hljs-string">'empty'</span>,
        <span class="hljs-string">'Sec-Fetch-Mode'</span>:<span class="hljs-string">'cors'</span>,
        <span class="hljs-string">'Sec-Fetch-Site'</span>:<span class="hljs-string">'same-origin'</span>,
        <span class="hljs-string">'User-Agent'</span>:<span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.193 Safari/537.36 Edg/86.0.622.68'</span>,
        <span class="hljs-string">'X-Requested-With'</span>:<span class="hljs-string">'XMLHttpRequest'</span>
    &#125;
    data=<span class="hljs-string">"fid=-1&amp;uname=&#123;0&#125;&amp;password=&#123;1&#125;&amp;refer=http%253A%252F%252Fi.chaoxing.com&amp;t=true"</span>.format(username,base64.b64encode(password.encode()).decode())
    print(base64.b64encode(password.encode()).decode())
    rsp=requests.post(url=url,headers=headers,data=data)
    print(rsp.text,rsp.status_code)</code></pre></div>
<p>è°ƒè¯•ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡ŒæŠŠç§å¯†ä¿¡æ¯æ‰“äº†é©¬èµ›å…‹ï¼Œä½†ä¸å½±å“çœ‹å‡ºæˆåŠŸã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/6.png" srcset="/img/loading.gif" alt="function_sign_in"><br>ä¸ºäº†åç»­å†…å®¹çš„é¡ºåˆ©è¿›è¡Œï¼Œè¿™è¾¹æˆ‘ä»¬å†æŠŠç™»é™†æˆåŠŸçš„cookieè®°å½•ä¸‹æ¥</p>
<div class="hljs"><pre><code class="hljs python">cookieStr = <span class="hljs-string">''</span> 
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> rsp.cookies:
        cookieStr = cookieStr + item.name + <span class="hljs-string">'='</span> + item.value + <span class="hljs-string">';'</span>
    print(cookieStr)</code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/7.png" srcset="/img/loading.gif" alt="cookie_sign_in"></p>
<h2 id="è·å–è¯¾ç¨‹"><a href="#è·å–è¯¾ç¨‹" class="headerlink" title="è·å–è¯¾ç¨‹"></a>è·å–è¯¾ç¨‹</h2><h3 id="ç½‘é¡µåˆ†æ-1"><a href="#ç½‘é¡µåˆ†æ-1" class="headerlink" title="ç½‘é¡µåˆ†æ"></a>ç½‘é¡µåˆ†æ</h3><h4 id="æŠ“å–è¯¾ç¨‹ä¿¡æ¯"><a href="#æŠ“å–è¯¾ç¨‹ä¿¡æ¯" class="headerlink" title="æŠ“å–è¯¾ç¨‹ä¿¡æ¯"></a>æŠ“å–è¯¾ç¨‹ä¿¡æ¯</h4><p>å› ä¸ºä¸èƒ½ç¡®å®šä¸ªäººç©ºé—´é‡Œé¢çš„è¯¾ç¨‹å†…å®¹æ˜¯é€šè¿‡jsonè·å–æ•°æ®åœ¨æœ¬åœ°æ¸²æŸ“çš„è¿˜æ˜¯æœåŠ¡å™¨å°±æ¸²æŸ“å¥½åä¼ ç»™ç”¨æˆ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯æŠ“åŒ…çœ‹çœ‹ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/8.png" srcset="/img/loading.gif" alt="post_zone"><br>æŸ¥æ‰¾æˆ‘ä»¬çš„è¯¾ç¨‹ï¼Œå‘ç°åœ¨æºä»£ç é‡Œå¹¶æ²¡æœ‰æ‰¾åˆ°ï¼Œæ‰€ä»¥å¤§æ¦‚ç‡æ˜¯ç¬¬ä¸€ç§å¯èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬å°è¯•å¾€ä¸‹æ‰¾ä¼ é€’è¯¾ç¨‹æ•°æ®çš„jsonåŒ…ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/9.png" srcset="/img/loading.gif" alt="post_zone_true"><br>å¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸæ‰¾åˆ°äº†æˆ‘ä»¬è¦çš„æ•°æ®åŒ…ï¼Œå¯æƒœå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„jsonåŒ…ï¼Œä½†é—®é¢˜ä¹Ÿä¸å¤§ï¼Œåªæ˜¯å¢åŠ äº†æˆ‘ä»¬ä»£ç è§£ææ—¶çš„å¤æ‚åº¦ã€‚ç„¶åå…·ä½“çœ‹æˆ‘ä»¬æŠ“åˆ°çš„è¿™ä¸ªè¯¾ç¨‹æ•°æ®åŒ…ï¼Œè¯·æ±‚æ–¹å¼ä¸ºgetï¼Œå”¯ä¸€éº»çƒ¦çš„æ˜¯å‚æ•°s<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/10.png" srcset="/img/loading.gif" alt="get_course"><br>è¿™ä¸ªså‚æ•°è‚¯å®šä¸ä¼šæ— æ•…å‡ºç°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾€å‰å¯»æ‰¾æœ‰æ²¡æœ‰å‰é¢å°±ç»™å‡ºäº†è¿™ä¸ªåœ°å€çš„ï¼Œæˆ‘ä»¬ä»æœ€å‰é¢æ‰¾ï¼Œçœ‹çœ‹æœ€åˆçš„é‚£ä¸ªç©ºé—´åœ°å€åŒ…é‡Œé¢æœ‰æ²¡æœ‰è¿™ä¸ªåœ°å€ã€‚<br>ç„¶è€Œæ­£å½“æˆ‘æ‰“ç®—å°è¯•æ—¶ï¼Œæˆ‘å‘ç°æŠŠså‚æ•°å»æ‰äº†ä¸€æ ·å¯ä»¥æ­£å¸¸è®¿é—®æˆ‘ä»¬çš„è¯¾ç¨‹æ•°æ®<code>http://mooc1-2.chaoxing.com/visit/courses</code><br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/11.png" srcset="/img/loading.gif" alt="get_course_withNoS"><br>é‚£ä¹ˆä¸ºäº†å°½å¯èƒ½ç®€åŒ–ï¼Œæˆ‘ä»¬è¿˜æ˜¯èƒ½å·æ‡’å°±å·æ‡’ã€‚<br>ç„¶åæˆ‘ä»¬è·³åˆ°ä»£ç é˜¶æ®µï¼Œå…ˆè¯•è¯•å‰é¢çš„cookieèƒ½å¦æ­£å¸¸ä½¿ç”¨ï¼Œå¹¶ä¸”è¯»å–åˆ°è¿™ä¸ªè¯¾ç¨‹ç½‘é¡µçš„ä¿¡æ¯ã€‚</p>
<p><a href="#å°è¯•cookieä¸è¯»å–è¯¾ç¨‹ä¿¡æ¯">ç‚¹æˆ‘è·³è½¬</a></p>
<h4 id="è§£æè¯¾ç¨‹ä¿¡æ¯"><a href="#è§£æè¯¾ç¨‹ä¿¡æ¯" class="headerlink" title="è§£æè¯¾ç¨‹ä¿¡æ¯"></a>è§£æè¯¾ç¨‹ä¿¡æ¯</h4><p>å› ä¸ºè¯¾ç¨‹æ•°æ®å·²ç»åœ¨<a href="http://mooc1-2.chaoxing.com/visit/courses" target="_blank" rel="noopener">http://mooc1-2.chaoxing.com/visit/courses</a> è¿™ä¸ªåŒ…é‡Œç»™å‡ºäº†ï¼Œä½†å®ƒåˆä¸æ˜¯ä¸€ä¸ªjsonï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç½‘é¡µæ¥è¿›è¡Œç»“æ„åˆ†æã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/13.png" srcset="/img/loading.gif" alt="post_deal_data"><br>å¯ä»¥çœ‹åˆ°è¯¾ç¨‹æ˜¯ä¸€ä¸ªulç»“æ„ä¸‹çš„å¤šä¸ªliæ„æˆçš„ã€‚æˆ‘ä»¬éœ€è¦çš„é‡Œé¢æ¯ä¸ªè¯¾ç¨‹çš„<code>courseId</code> <code>classId</code>ä¸å¯¹åº”è·³è½¬çš„url(å› ä¸ºurlé‡ŒåŒ…å«äº†courseidä¸classidï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€æ˜¯é€šè¿‡xpathå…ˆå‚¨å­˜å¹¶å…³è”urlä¸å¯¹åº”çš„è¯¾ç¨‹idï¼›äº¦æˆ–æ˜¯åªè·å–urlï¼Œåé¢å†ä»urlé‡Œè¯»å–å‚æ•°courseidï¼Œclassidç­‰)ã€‚é€‰ä¸­æˆ‘ä»¬è¦çš„å…ƒç´ ï¼Œå³é”®å¤åˆ¶xpathã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/14.png" srcset="/img/loading.gif" alt="html_xpath"><br>è¿™é‡Œæˆ‘é€‰æ‹©äº†ç¬¬äºŒç§æ–¹æ¡ˆï¼Œåªè·å–urlï¼Œcourseidä»urlä¸­è¯»å–ã€‚æˆ‘ä»¬ç»§ç»­è·³åˆ°ä»£ç æ­¥éª¤ã€‚ </p>
<p><a href="#è¯¾ç¨‹xpathä¹¦å†™ä¸é‡å®šå‘é—®é¢˜">ç‚¹æˆ‘è·³è½¬</a> </p>
<h3 id="ä»£ç æ’°å†™-1"><a href="#ä»£ç æ’°å†™-1" class="headerlink" title="ä»£ç æ’°å†™"></a>ä»£ç æ’°å†™</h3><h4 id="å°è¯•cookieä¸è¯»å–è¯¾ç¨‹ä¿¡æ¯"><a href="#å°è¯•cookieä¸è¯»å–è¯¾ç¨‹ä¿¡æ¯" class="headerlink" title="å°è¯•cookieä¸è¯»å–è¯¾ç¨‹ä¿¡æ¯"></a>å°è¯•cookieä¸è¯»å–è¯¾ç¨‹ä¿¡æ¯</h4><p>å°†ç™»é™†è·å–åˆ°çš„cookieåˆå¹¶æˆcookiestråä¼ å…¥è·å–è¯¾ç¨‹ä¿¡æ¯çš„å‡½æ•°</p>
<div class="hljs"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_course</span><span class="hljs-params">(cookie:str)</span>:</span>
    course_headers=&#123;
        <span class="hljs-string">'Cookie'</span>:cookie,
        <span class="hljs-string">'User-Agent'</span>:<span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36 Edg/85.0.564.51'</span>
    &#125;
    course_rsp=requests.get(url=<span class="hljs-string">"http://mooc1-2.chaoxing.com/visit/courses"</span>,headers=course_headers)
    print(course_rsp.text)</code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/12.png" srcset="/img/loading.gif" alt="funtion_get_course"><br>å¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸè·å–åˆ°äº†è¯¾ç¨‹ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿå°è¯äº†æˆ‘ä»¬å‰é¢ç™»å½•å‡½æ•°çš„å¯è¡Œæ€§ã€‚<br>ä¹‹åå›åˆ°ç½‘é¡µï¼Œæˆ‘ä»¬ç»§ç»­åˆ†æç½‘é¡µç»“æ„ï¼Œä½¿pythonå¯ä»¥è§£ææˆ‘ä»¬çš„æ‰€æœ‰è¯¾ç¨‹åŠç›¸å…³ä¿¡æ¯ã€‚  </p>
<p><a href="#è§£æè¯¾ç¨‹ä¿¡æ¯">ç‚¹æˆ‘è·³è½¬</a>  </p>
<h4 id="è¯¾ç¨‹xpathä¹¦å†™ä¸é‡å®šå‘é—®é¢˜"><a href="#è¯¾ç¨‹xpathä¹¦å†™ä¸é‡å®šå‘é—®é¢˜" class="headerlink" title="è¯¾ç¨‹xpathä¹¦å†™ä¸é‡å®šå‘é—®é¢˜"></a>è¯¾ç¨‹xpathä¹¦å†™ä¸é‡å®šå‘é—®é¢˜</h4><div class="hljs"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_course</span><span class="hljs-params">(cookie:str)</span>:</span>
    course_headers=&#123;
        <span class="hljs-string">'Cookie'</span>:cookie,
        <span class="hljs-string">'User-Agent'</span>:<span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36 Edg/85.0.564.51'</span>
    &#125;
    course_rsp=requests.get(url=<span class="hljs-string">"http://mooc1-2.chaoxing.com/visit/courses"</span>,headers=course_headers)
    <span class="hljs-keyword">if</span> course_rsp.status_code==<span class="hljs-number">200</span>:
        <span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> etree
        class_HTML=etree.HTML(course_rsp.text)
        print(<span class="hljs-string">"å¤„ç†æˆåŠŸï¼Œæ‚¨å½“å‰å·²å¼€å¯çš„è¯¾ç¨‹å¦‚ä¸‹ï¼š\n"</span>)
        i=<span class="hljs-number">0</span>
        <span class="hljs-keyword">global</span> course_dict
        course_dict=&#123;&#125;
        <span class="hljs-keyword">for</span> class_item <span class="hljs-keyword">in</span> class_HTML.xpath(<span class="hljs-string">"/html/body/div/div[2]/div[3]/ul/li[@class='courseItem curFile']"</span>):
            <span class="hljs-comment">#courseid=class_item.xpath("./input[@name='courseId']/@value")[0]</span>
            <span class="hljs-comment">#classid=class_item.xpath("./input[@name='classId']/@value")[0]</span>
            <span class="hljs-keyword">try</span>:              
                class_item_name=class_item.xpath(<span class="hljs-string">"./div[2]/h3/a/@title"</span>)[<span class="hljs-number">0</span>]
                <span class="hljs-comment">#ç­‰å¾…å¼€è¯¾çš„è¯¾ç¨‹ç”±äºå°šæœªå¯¹åº”é“¾æ¥ï¼Œæ‰€æœ‰ç¼ºå°‘aæ ‡ç­¾ã€‚</span>
                i+=<span class="hljs-number">1</span>
                print(class_item_name)
                course_dict[i]=[class_item_name,<span class="hljs-string">"https://mooc1-2.chaoxing.com&#123;&#125;"</span>.format(class_item.xpath(<span class="hljs-string">"./div[1]/a[1]/@href"</span>)[<span class="hljs-number">0</span>])]
            <span class="hljs-keyword">except</span>:
                <span class="hljs-keyword">pass</span>
        print(<span class="hljs-string">"â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”"</span>)
    <span class="hljs-keyword">else</span>:
        print(<span class="hljs-string">"error:è¯¾ç¨‹å¤„ç†å¤±è´¥"</span>)</code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/15.png" srcset="/img/loading.gif" alt="code_xpath"><br>è¯¾ç¨‹è¯»å–æˆåŠŸäº†ï¼Œè¯¾ç¨‹çš„urlä¸nameä¹Ÿä½œä¸ºlistè¢«æˆ‘ä»¬å…³è”å‚¨å­˜åˆ°äº†course_dictè¿™ä¸ªdictä¸­(ä¸ºäº†ä½¿åºå·ä¸è¯¾ç¨‹è¿›è¡Œå…³è”ï¼Œå¹¶ä¸”ä¿æŒæœ‰åºæ€§)<br>è¯¾ç¨‹è·å–å®Œåæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹é’ˆå¯¹å•ä¸ªè¯¾ç¨‹ï¼Œè¯»å–é‡Œé¢çš„å¾…å®Œæˆè§†é¢‘ä»»åŠ¡æ·»åŠ åˆ°ç¨‹åºä»»åŠ¡é‡Œã€‚ç„¶è€Œï¼Œä»”ç»†è§‚å¯Ÿæˆ‘ä»¬ä»htmlé‡Œè·å–åˆ°çš„url<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/16.png" srcset="/img/loading.gif" alt="before_url"><br>ä¸æˆ‘ä»¬æ‰‹åŠ¨è®¿é—®è¯¾ç¨‹è·å–çš„url<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/17.png" srcset="/img/loading.gif" alt="after_url"><br>å‘ç°ä¸¤è€…å¹¶ä¸ç›¸åŒï¼Œæˆ‘ä»¬å°è¯•è®¿é—®htmlé‡Œçš„urlï¼Œç„¶åæŠ“åŒ…çœ‹å‘ç”Ÿäº†ä»€ä¹ˆ<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/18.png" srcset="/img/loading.gif" alt="status_302"><br>ä¸å‡ºæ‰€æ–™ï¼Œæœç„¶urlå‘ç”Ÿäº†302é‡å®šå‘ã€‚<br>æœ¬æ¥requestsåº“æ˜¯ä¼šè¯†åˆ«302å¹¶è‡ªåŠ¨è·Ÿéšè·³è½¬çš„ï¼Œä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘è¿™é‡Œå‡ºç°äº†é”™è¯¯ï¼Œå¹¶æœªè·Ÿéšè·³è½¬ï¼Œç”šè‡³è®©æˆ‘ä¸€åº¦æ€€ç–‘é—®é¢˜å‡ºåœ¨äº†cookieä¸Šã€‚</p>
<div class="hljs"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deal_course</span><span class="hljs-params">(url:str)</span>:</span>
    course_302_url=url
    course_headers=&#123;
        <span class="hljs-string">'Accept'</span>:<span class="hljs-string">'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9'</span>,
        <span class="hljs-string">'Accept-Encoding'</span>:<span class="hljs-string">'gzip, deflate, br'</span>,
        <span class="hljs-string">'Accept-Language'</span>:<span class="hljs-string">'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'</span>,
        <span class="hljs-string">'Connection'</span>:<span class="hljs-string">'keep-alive'</span>,
        <span class="hljs-string">'Cookie'</span>:cookieStr,
        <span class="hljs-string">'Host'</span>:<span class="hljs-string">'mooc1-2.chaoxing.com'</span>,
        <span class="hljs-string">'Sec-Fetch-Dest'</span>:<span class="hljs-string">'document'</span>,
        <span class="hljs-string">'Sec-Fetch-Mode'</span>:<span class="hljs-string">'navigate'</span>,
        <span class="hljs-string">'Sec-Fetch-Site'</span>:<span class="hljs-string">'none'</span>,
        <span class="hljs-string">'Upgrade-Insecure-Requests'</span>:<span class="hljs-string">'1'</span>,
        <span class="hljs-string">'User-Agent'</span>:<span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36 Edg/85.0.564.51'</span>
    &#125;
    <span class="hljs-comment">#302è·³è½¬ï¼Œrequestsåº“é»˜è®¤è¿½è¸ªheadersé‡Œçš„locationè¿›è¡Œè·³è½¬ï¼Œä½¿ç”¨allow_redirects=False</span>
    course_302_rsp=requests.get(url=course_302_url,headers=course_headers,allow_redirects=<span class="hljs-literal">False</span>)
    new_url=course_302_rsp.headers[<span class="hljs-string">'Location'</span>]</code></pre></div>
<p>è¿™æ ·ï¼Œåªéœ€è¦å°†htmlé‡Œè·å–åˆ°çš„urlä¼ å…¥åˆ°è¿™ä¸ªå‡½æ•°é‡Œï¼Œnew_urlå°±æ˜¯æˆ‘ä»¬è¦çš„çœŸæ­£çš„è¯¾ç¨‹åœ°å€äº†ã€‚<br>çœŸæ­£çš„è¯¾ç¨‹åœ°å€è·å–å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å›åˆ°ç½‘ç»œåˆ†æï¼Œåˆ†æå•ä¸ªè¯¾ç¨‹ä¸­æˆ‘ä»¬éœ€è¦å®Œæˆçš„ä»»åŠ¡ã€‚ </p>
<h2 id="è¯¾ç¨‹ä»»åŠ¡"><a href="#è¯¾ç¨‹ä»»åŠ¡" class="headerlink" title="è¯¾ç¨‹ä»»åŠ¡"></a>è¯¾ç¨‹ä»»åŠ¡</h2><h3 id="åˆ†æç½‘é¡µ"><a href="#åˆ†æç½‘é¡µ" class="headerlink" title="åˆ†æç½‘é¡µ"></a>åˆ†æç½‘é¡µ</h3><p>ä»»æ„è¿›å…¥åˆ°ä¸€ä¸ªè¯¾ç¨‹ä¸­ï¼Œé€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼šç™½è‰²æ— å†…å®¹çš„â€”â€”æ²¡æœ‰ä»»åŠ¡ï¼›æ©™è‰²æœ‰æ•°å­—çš„â€”â€”æ•°å­—ä»£è¡¨è¯¥ç« èŠ‚çš„ä»»åŠ¡æ•°ï¼›ç»¿è‰²å‹¾å‹¾çš„â€”â€”æœ‰ä»»åŠ¡ä½†å·²å®Œæˆäº†çš„ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/19.png" srcset="/img/loading.gif" alt="misson_html"><br>åˆ·æ–°ä¸€ä¸‹ï¼Œå‘ç°è¯¥è¯¾ç¨‹åœ°å€å°±å·²ç»ç»™å‡ºäº†ç›¸å…³çš„ç« èŠ‚ä¿¡æ¯ï¼Œå³åœ¨æœåŠ¡ç«¯å·²ç»æ¸²æŸ“å¥½äº†å†ä¼ è¾“åˆ°ç”¨æˆ·ç«¯ï¼Œå¹¶æ²¡æœ‰é¢å¤–çš„jsonæ•°æ®åŒ…ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/20.png" srcset="/img/loading.gif" alt="post_course_html"><br>æ‰€ä»¥æˆ‘ä»¬ç›´æ¥å³é”®â€œæ£€æŸ¥â€ï¼ŒæŸ¥çœ‹ç½‘é¡µå…ƒç´ ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/21.png" srcset="/img/loading.gif" alt="course_html_element"><br>æ‰¾è§„å¾‹å¯ä»¥å‘ç°ï¼Œæ­£å¸¸çš„æ²¡æœ‰è¯¾ç¨‹ä»»åŠ¡çš„ï¼Œemå…ƒç´ çš„classæ˜¯â€œblankâ€ï¼Œå¦‚æœæœ‰ä»»åŠ¡ä½†å·²å®Œæˆåˆ™æ˜¯â€œopenlockâ€ï¼Œå¦‚æœæœ‰ä»»åŠ¡ä½†æœªå®Œæˆåˆ™classä¸ºâ€œorangeâ€ï¼Œä¸”å…¶textä¸ºä»»åŠ¡æ•°ã€‚<br>çŸ¥é“äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°±å¥½å†™äº†ï¼Œåªéœ€è¦åˆ¤æ–­emå…ƒç´ classå±æ€§æ˜¯orangeçš„ï¼Œå¹¶æŠŠå®ƒå¯¹åº”çš„urlå†™å…¥æˆ‘ä»¬çš„ä»»åŠ¡åˆ—è¡¨é‡Œã€‚æ‰€ä»¥æ¥ä¸‹æ¥å›åˆ°ä»£ç ç¯èŠ‚  </p>
<h3 id="ä»£ç ç¼–å†™"><a href="#ä»£ç ç¼–å†™" class="headerlink" title="ä»£ç ç¼–å†™"></a>ä»£ç ç¼–å†™</h3><p>ç« èŠ‚ä¿¡æ¯åˆ¤æ–­ä¸æœªå®Œæˆä»»åŠ¡è¯»å–<br>é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œä»¥åŠè¯¾ç¨‹ä¿¡æ¯urlçš„è·å–ï¼Œå°†å…¶ä¼ å…¥çš„requestsï¼Œè·å–æºä»£ç åå³å¯è¿›è¡Œåˆ¤æ–­å¤„ç†ã€‚</p>
<div class="hljs"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_misson</span><span class="hljs-params">(url:str)</span>:</span>
    course_headers=&#123;
        <span class="hljs-string">'Accept'</span>:<span class="hljs-string">'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9'</span>,
        <span class="hljs-string">'Accept-Encoding'</span>:<span class="hljs-string">'gzip, deflate, br'</span>,
        <span class="hljs-string">'Accept-Language'</span>:<span class="hljs-string">'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'</span>,
        <span class="hljs-string">'Connection'</span>:<span class="hljs-string">'keep-alive'</span>,
        <span class="hljs-string">'Cookie'</span>:cookieStr,
        <span class="hljs-string">'Host'</span>:<span class="hljs-string">'mooc1-2.chaoxing.com'</span>,
        <span class="hljs-string">'Sec-Fetch-Dest'</span>:<span class="hljs-string">'document'</span>,
        <span class="hljs-string">'Sec-Fetch-Mode'</span>:<span class="hljs-string">'navigate'</span>,
        <span class="hljs-string">'Sec-Fetch-Site'</span>:<span class="hljs-string">'none'</span>,
        <span class="hljs-string">'Upgrade-Insecure-Requests'</span>:<span class="hljs-string">'1'</span>,
        <span class="hljs-string">'User-Agent'</span>:<span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36 Edg/85.0.564.51'</span>
    &#125;
    course_rsp=requests.get(url=url,headers=course_headers)
    course_HTML=etree.HTML(course_rsp.text)
    <span class="hljs-comment">#ä¸ºé˜²æ­¢è´¦å·æ²¡æœ‰è¯¾ç¨‹æˆ–æ²¡æœ‰ç­çº§ï¼Œéœ€è¦åæœŸåœ¨xpathè·å–åŠ å…¥tryï¼Œä»¥é˜²æŠ¥é”™</span>
    chapter_mission=[]
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">for</span> course_unit <span class="hljs-keyword">in</span> course_HTML.xpath(<span class="hljs-string">"/html/body/div[5]/div[1]/div[2]/div[3]/div"</span>):
            print(course_unit.xpath(<span class="hljs-string">"./h2/a/@title"</span>)[<span class="hljs-number">0</span>])
            <span class="hljs-keyword">for</span> chapter_item <span class="hljs-keyword">in</span> course_unit.xpath(<span class="hljs-string">"./div"</span>):
                chapter_status=chapter_item.xpath(<span class="hljs-string">"./h3/span[@class='icon']/em/@class"</span>)[<span class="hljs-number">0</span>]
                <span class="hljs-keyword">if</span> chapter_status == <span class="hljs-string">"orange"</span>:
                    print(<span class="hljs-string">"----"</span>,chapter_item.xpath(<span class="hljs-string">"./h3/span[@class='articlename']/a/@title"</span>)[<span class="hljs-number">0</span>],<span class="hljs-string">"      "</span>,chapter_item.xpath(<span class="hljs-string">"./h3/span[@class='icon']/em/text()"</span>)[<span class="hljs-number">0</span>])
                    chapter_mission.append(<span class="hljs-string">"https://mooc1-2.chaoxing.com&#123;&#125;"</span>.format(chapter_item.xpath(<span class="hljs-string">"./h3/span[@class='articlename']/a/@href"</span>)[<span class="hljs-number">0</span>]))
                <span class="hljs-keyword">else</span>:    
                    print(<span class="hljs-string">"----"</span>,chapter_item.xpath(<span class="hljs-string">"./h3/span[@class='articlename']/a/@title"</span>)[<span class="hljs-number">0</span>],<span class="hljs-string">"      "</span>,chapter_item.xpath(<span class="hljs-string">"./h3/span[@class='icon']/em/@class"</span>)[<span class="hljs-number">0</span>])
    <span class="hljs-keyword">except</span>:
        <span class="hljs-keyword">pass</span>
    print(<span class="hljs-string">"è¯¾ç¨‹è¯»å–å®Œæˆï¼Œå…±æœ‰%dä¸ªç« èŠ‚å¯ä¸€é”®å®Œæˆ"</span>%len(chapter_mission))</code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/22.png" srcset="/img/loading.gif" alt="function_add_misson"></p>
<h2 id="è§†é¢‘ä»»åŠ¡ç‚¹"><a href="#è§†é¢‘ä»»åŠ¡ç‚¹" class="headerlink" title="è§†é¢‘ä»»åŠ¡ç‚¹"></a>è§†é¢‘ä»»åŠ¡ç‚¹</h2><p>å› ä¸ºè¦å®ç°çš„æ˜¯ä¸€é”®åˆ·è¯¾ç¨‹è§†é¢‘ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬è¦è¯»å–çš„æ˜¯ç« èŠ‚ä»»åŠ¡é‡Œé¢çš„è§†é¢‘ä»»åŠ¡ç‚¹ã€‚</p>
<h3 id="ç½‘é¡µåˆ†æ-2"><a href="#ç½‘é¡µåˆ†æ-2" class="headerlink" title="ç½‘é¡µåˆ†æ"></a>ç½‘é¡µåˆ†æ</h3><p>è¿˜æ˜¯è€æ ·å­ï¼Œå…ˆæŠ“ä¸€ä¸‹åŒ…ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/23.png" srcset="/img/loading.gif" alt="post_video_misson"><br>å¯ä»¥ä»é¢„è§ˆé‡Œçœ‹å‡ºï¼Œç« èŠ‚ç½‘é¡µä¼¼ä¹å¹¶æ²¡æœ‰å®Œå…¨æ¸²æŸ“å®Œæˆåå†ä¼ è¾“ç»™æˆ‘ä»¬ã€‚é€šè¿‡æŸ¥çœ‹å“åº”é‡Œé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä¹ŸéªŒè¯äº†çŒœæƒ³ï¼Œå¹¶æœªæ‰¾åˆ°æœ‰å…³çš„è§†é¢‘æ•°æ®ã€‚æ‰€ä»¥æˆ‘ä»¬å°è¯•å¾€ä¸‹å¯»æ‰¾åŒ…å«è§†é¢‘ä¿¡æ¯çš„jsonåŒ…æˆ–è€…htmlç½‘é¡µã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/24.png" srcset="/img/loading.gif" alt="post_video"><br>æœ€åï¼Œåœ¨è¿™ä¸ªâ€œ/knowledge/cardsâ€é‡Œçš„åŒ…é‡Œæ‰¾åˆ°äº†æˆ‘ä»¬è¦çš„æ•°æ®ï¼Œå¯æƒœå®ƒä¹Ÿä¸æ˜¯jsonï¼Œè€Œæ˜¯ä¸€ä¸ªhtmlï¼Œé‡Œé¢æœ‰jsä»£ç ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜å¾—è‡ªå·±æå–ä»£ç ï¼Œå¹¶è½¬åŒ–æˆpythonå¯è¯†åˆ«çš„å†…å®¹ã€‚è¿™è¾¹çš„åˆ†æè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œä½†å¹¶ä¸ç®—éš¾ï¼Œåªèƒ½è¯´ä¸ç†Ÿç»ƒçš„è¯éœ€è¦å¤šè¯•è¯•ã€‚è¿™ä¸ªå°±è¯·è‡ªå·±å°è¯•çœ‹çœ‹å§ï¼Œè¿™è¾¹å°±ä¸ç»™å‡ºå…·ä½“åˆ†æè¿‡ç¨‹äº†ï¼ˆå› ä¸ºè‡ªå·±ä¹Ÿæƒ³ä¸èµ·æ¥äº†ï¼Œä¹Ÿä¸æƒ³å†åˆ†æä¸€éï¼Œæ‡’ï¼‰ã€‚ä¸è¿‡å¦‚æœå®åœ¨æœ‰é—®é¢˜çš„è¯ä¹Ÿå¯ä»¥è”ç³»æˆ‘ï¼Œå’Œæˆ‘äº¤æµäº¤æµã€‚é‚£æˆ‘ä»¬å°±ç›´æ¥è¿›å…¥ä»£ç ç¯èŠ‚ç„¶åç»™å‡ºä»£ç ã€‚<br>æˆ‘ä»¬é¡ºä¾¿åˆ†æä¸€ä¸‹è¿™äº›è§†é¢‘æ•°æ®ä»£è¡¨çš„å†…å®¹ã€‚<br>â€œisPassedâ€æ˜¯ä»»åŠ¡ç‚¹æ˜¯å¦å·²å®Œæˆï¼Œtrueä¸ºå·²å®Œæˆï¼Œfalseä¸ºæœªå®Œæˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­å®ƒçš„å±æ€§æ¥ç›´æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦å¯¹è¯¥è§†é¢‘è¿›è¡Œå¤„ç†ã€‚<br>â€œtypeâ€: â€œvideoâ€æ˜¯ç±»å‹ä¸ºè§†é¢‘ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åˆ¤æ–­æ˜¯å¦è¦æ·»åŠ åˆ°ä»»åŠ¡åˆ—è¡¨çš„ä¸€ä¸ªæ¡ä»¶ï¼ˆå› ä¸ºæˆ‘ä»¬è¦å®ç°çš„åªæœ‰åˆ·è¶…æ˜Ÿè§†é¢‘ï¼‰ï¼Œå…¶ä»–è¿˜æœ‰å¯èƒ½å‡ºç°pptè¿™ç§ã€‚<br>å…¶ä»–å…¶å®é€šè¿‡åå­—ä¹Ÿéƒ½èƒ½çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œä¸»è¦è¿˜æ˜¯è¦çœ‹åé¢æˆ‘ä»¬éœ€è¦ç”¨åˆ°ä»€ä¹ˆå±æ€§ã€‚</p>
<h3 id="ä»£ç ç¼–å†™-1"><a href="#ä»£ç ç¼–å†™-1" class="headerlink" title="ä»£ç ç¼–å†™"></a>ä»£ç ç¼–å†™</h3><p>ä¸ºäº†æŠŠjsä»£ç æå–å‡ºæ¥å¹¶å˜æˆpythonä¸­çš„dictæˆ–listï¼Œæˆ‘è¿™é‡Œç”¨åˆ°äº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œå–å‡ºæˆ‘ä»¬è¦çš„å†…å®¹ã€‚</p>
<div class="hljs"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deal_misson</span><span class="hljs-params">(missons:list,class_cpi:str)</span>:</span>  
    <span class="hljs-keyword">for</span> chapter_mission_item <span class="hljs-keyword">in</span> missons:
        result = parse.urlparse(chapter_mission_item)
        chapter_data=parse.parse_qs(result.query)
        print(chapter_data)
        medias_url=<span class="hljs-string">"https://mooc1-2.chaoxing.com/knowledge/cards?clazzid=&#123;0&#125;&amp;courseid=&#123;1&#125;&amp;knowledgeid=&#123;2&#125;&amp;num=0&amp;ut=s&amp;cpi=&#123;3&#125;&amp;v=20160407-1"</span>.format(chapter_data.get(<span class="hljs-string">'clazzid'</span>)[<span class="hljs-number">0</span>],chapter_data.get(<span class="hljs-string">'courseId'</span>)[<span class="hljs-number">0</span>],chapter_data.get(<span class="hljs-string">'chapterId'</span>)[<span class="hljs-number">0</span>],class_cpi)
        class_headers=&#123;
        <span class="hljs-string">'Cookie'</span>:cookieStr,
        <span class="hljs-string">'User-Agent'</span>:<span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36 Edg/85.0.564.51'</span>
        &#125;
        medias_rsp=requests.get(url=medias_url,headers=class_headers)
        medias_HTML=etree.HTML(medias_rsp.text)
        medias_text=medias_HTML.xpath(<span class="hljs-string">"//script[1]/text()"</span>)[<span class="hljs-number">0</span>]
        <span class="hljs-keyword">import</span> re,json
        pattern = re.compile(<span class="hljs-string">r'attachments":([\s\S]*),"defaults"'</span>) 
        re_result=re.findall(pattern,medias_text)[<span class="hljs-number">0</span>]
        reportUrl=re.findall(<span class="hljs-string">r'reportUrl":([\s\S]*),"chapterCapture"'</span>,medias_text)[<span class="hljs-number">0</span>]
        reportUrl=reportUrl.replace(<span class="hljs-string">"\""</span>,<span class="hljs-string">""</span>)
        result_json=json.loads(re_result)</code></pre></div>
<p>è¿™é‡Œä¼ å…¥çš„missonsæ˜¯æ¯ä¸ªç« èŠ‚çš„é“¾æ¥æ„æˆçš„ä¸€ä¸ªlistï¼Œè‡³äºclass_cpiæ˜¯è¯¾ç¨‹çš„cpiä¿¡æ¯ï¼Œæ¯ä¸ªè¯¾ç¨‹ä¸­çš„æ‰€æœ‰ç« èŠ‚ä¸­çš„æ‰€æœ‰è§†é¢‘éƒ½å…±ç”¨è¿™ä¸ªcpiå±æ€§ï¼Œè€Œè¿™ä¸ªæ˜¯åé¢å®Œæˆè§†é¢‘è¦ç”¨åˆ°çš„ï¼Œé’ˆå¯¹æˆ‘ä»¬ç°åœ¨åˆ¤æ–­è§†é¢‘ä»»åŠ¡å¹¶ç”¨ä¸åˆ°ã€‚<strong>result_json</strong>å³æ˜¯æˆ‘ä»¬ä»ç½‘é¡µä»£ç ä¸­æå–å‡ºçš„jsonã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/25.png" srcset="/img/loading.gif" alt="misson_debug"><br>å¯ä»¥çœ‹åˆ°ï¼Œè°ƒè¯•æˆåŠŸäº†ï¼Œè€Œä¸”æ˜¯å¾ˆå®Œç¾çš„jsonæ ¼å¼ï¼Œloadsæˆ‘ä»¬å¯ä»¥ç”¨listçš„æ“ä½œæ–¹å¼è½»æ¾çš„è°ƒç”¨å…¶ä¸­çš„æ•°æ®ä¿¡æ¯ã€‚<br>ç« èŠ‚ä¸­çš„è§†é¢‘ä¿¡æ¯æˆ‘ä»¬ä¹Ÿå¤„ç†å®Œæˆäº†ï¼Œåˆ°æ­¤æˆ‘ä»¬çš„å‡†å¤‡å·¥ä½œå·²ç»éƒ½å®Œæˆäº†ã€‚<strong>è´¦å·ç™»é™†â€”â€”åˆ¤æ–­è¯¾ç¨‹ä¿¡æ¯â€”â€”åˆ¤æ–­è¯¾ç¨‹ä¸­çš„ç« èŠ‚ä»»åŠ¡â€”â€”åˆ¤æ–­ç« èŠ‚é‡Œé¢çš„è§†é¢‘ä»»åŠ¡</strong>ï¼Œæœ€åä¸€æ­¥å°±æ˜¯å®Œæˆç« èŠ‚é‡Œçš„è§†é¢‘ä»»åŠ¡äº†ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æœ€åçš„å¤§å¤´ã€‚</p>
<h2 id="ä»»åŠ¡å®Œæˆè§£æ"><a href="#ä»»åŠ¡å®Œæˆè§£æ" class="headerlink" title="ä»»åŠ¡å®Œæˆè§£æ"></a>ä»»åŠ¡å®Œæˆè§£æ</h2><h3 id="æŠ“åŒ…åˆ†æ"><a href="#æŠ“åŒ…åˆ†æ" class="headerlink" title="æŠ“åŒ…åˆ†æ"></a>æŠ“åŒ…åˆ†æ</h3><p>æ‰“å¼€â€œå¼€å‘è€…é€‰é¡¹â€ï¼Œè¿›è¡ŒæŠ“åŒ…ï¼Œç„¶åæ’­æ”¾è§†é¢‘ã€‚å‡ºç°äº†ä¸¤ä¸ªåŒ…<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/26.png" srcset="/img/loading.gif" alt="post_video_status"><br>ç¬¬ä¸€ä¸ªæ˜¯è§†é¢‘çš„åŒ…ï¼Œç”¨äºå‘æœåŠ¡å™¨è¯·æ±‚è§†é¢‘æ•°æ®ï¼Œä»å…¶ä¸­çš„typeï¼Œä»¥åŠä¸€äº›å…¶ä»–çš„headerséƒ½èƒ½çœ‹å‡ºæ¥ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/27.png" srcset="/img/loading.gif" alt="post_video_first"><br>ç¬¬äºŒä¸ªåŒ…ï¼Œå°±æ˜¯æˆ‘ä»¬è¦çš„ç”¨æ¥å®Œæˆä»»åŠ¡çš„åŒ…äº†ã€‚å®ƒä¼ è¾“çš„æ˜¯ä½ è§‚çœ‹çš„æ•°æ®ï¼Œè¿”å›çš„isPassedæ¥è¯´æ˜ä½ çš„ä»»åŠ¡æ˜¯å¦å®Œæˆäº†ã€‚å› ä¸ºæˆ‘ä»¬åªæ˜¯æ’­æ”¾äº†ä¸€ä¸‹ï¼Œæ‰€ä»¥ä»»åŠ¡å½“ç„¶æ²¡èƒ½å®Œæˆï¼Œæ‰€ä»¥è¿”å›çš„æ•°æ®æ˜¯{â€œisPassedâ€:false}ã€‚<br>ç„¶åæˆ‘ä»¬ç­‰è§†é¢‘æ”¾å®Œï¼Œå³å°†ä»»åŠ¡ç‚¹å®Œæˆï¼Œçœ‹å®ƒä¼šå‘é€ä»€ä¹ˆåŒ…ï¼Œä¸å‰é¢è¿™ä¸ªåŒ…æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/28.png" srcset="/img/loading.gif" alt="post_video_finish"></p>
<p>å¯ä»¥çœ‹å‡ºä¸»è¦åŒºåˆ«å°±åœ¨è¿™ä¸ªplayingTimeï¼Œç¿»è¯‘ä¸‹æ¥ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œåº”è¯¥å°±æ˜¯æˆ‘ä»¬æ’­æ”¾äº†çš„æ—¶é—´ã€‚åªè¦è¿™ä¸ªæ—¶é—´ç­‰äºè§†é¢‘çš„æ€»é•¿åº¦ï¼Œé‚£ä¹ˆå°±ç®—æˆ‘ä»¬å°±å®Œæˆäº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸‹æäº¤çš„æ•´ä¸ªè¡¨å•ã€‚ </p>
<table>
<thead>
<tr>
<th>key</th>
<th>å«ä¹‰</th>
<th>æ¥æº</th>
</tr>
</thead>
<tbody><tr>
<td>clazzId</td>
<td>ç« èŠ‚ID</td>
<td>å•ä¸ªç« èŠ‚çš„urlé‡Œ</td>
</tr>
<tr>
<td>playingTime</td>
<td>è§†é¢‘æ’­æ”¾çš„æ—¶é—´</td>
<td>è‡ªå·±ä¿®æ”¹ï¼Œé€šè¿‡è¯»å–è§†é¢‘çš„é•¿åº¦ä¿¡æ¯</td>
</tr>
<tr>
<td>duration</td>
<td>æ—¶é—´</td>
<td>ä¸playingtimeåŒæ­¥ï¼Œéƒ½ä¸ºè§†é¢‘çš„æ€»æ—¶é•¿</td>
</tr>
<tr>
<td>clipTime</td>
<td>èµ·æ­¢æ—¶é—´ï¼Ÿ</td>
<td>â€œ0_â€åŠ ä¸Šæ€»æ—¶é•¿ï¼Œå³ä¸å‰é¢ä¸¤ä¸ªå‚æ•°ä¸€æ ·ï¼Œä½†åœ¨å‰æ–¹åŠ ä¸Šâ€0_â€</td>
</tr>
<tr>
<td>objectId</td>
<td>è§†é¢‘çš„â€œobjectIdâ€å±æ€§</td>
<td>ç”±<a href="#è§†é¢‘ä»»åŠ¡ç‚¹">è§†é¢‘ä»»åŠ¡ç‚¹</a>ä¸­çš„æ‰€æœ‰è§†é¢‘ä¿¡æ¯â€œresult_jsonâ€ é‡Œé¢çš„å•ä¸ªè§†é¢‘æ•°æ®ä¸­ç»™å‡ºã€‚</td>
</tr>
<tr>
<td>otherInfo</td>
<td>è§†é¢‘çš„â€œotherInfoâ€å±æ€§</td>
<td>ç”±<a href="#è§†é¢‘ä»»åŠ¡ç‚¹">è§†é¢‘ä»»åŠ¡ç‚¹</a>ä¸­çš„æ‰€æœ‰è§†é¢‘ä¿¡æ¯â€œresult_jsonâ€ é‡Œé¢çš„å•ä¸ªè§†é¢‘æ•°æ®ä¸­ç»™å‡ºã€‚</td>
</tr>
<tr>
<td>jobid</td>
<td>è§†é¢‘çš„â€œjobidâ€å±æ€§</td>
<td>ç”±<a href="#è§†é¢‘ä»»åŠ¡ç‚¹">è§†é¢‘ä»»åŠ¡ç‚¹</a>ä¸­çš„æ‰€æœ‰è§†é¢‘ä¿¡æ¯â€œresult_jsonâ€ é‡Œé¢çš„å•ä¸ªè§†é¢‘æ•°æ®ä¸­ç»™å‡ºã€‚</td>
</tr>
<tr>
<td>userid</td>
<td>ç”¨æˆ·idä¿¡æ¯</td>
<td>ç”±ç™»é™†æ—¶è·å–çš„cookieé‡Œè·å–</td>
</tr>
<tr>
<td>isdrag</td>
<td>è§†é¢‘çŠ¶æ€ä¿¡æ¯ï¼Œ0ï¼šé»˜è®¤ï¼›3ï¼šæ’­æ”¾ï¼›2ï¼šæš‚åœï¼›4ï¼šè§†é¢‘ç»“æŸã€‚</td>
<td>æˆ‘ä»¬è¦ç”¨çš„æ˜¯çŠ¶æ€4ï¼Œå°†å…¶ä½œä¸ºå¸¸é‡</td>
</tr>
<tr>
<td>view</td>
<td>ç»ˆç«¯æƒ…å†µï¼Ÿ</td>
<td>å€¼ä¸ºâ€pcâ€ï¼Œæˆ‘ä»¬å°†å…¶ä½œä¸ºå¸¸é‡ä¸ä¿®æ”¹å®ƒ</td>
</tr>
<tr>
<td>enc</td>
<td>æ˜¯å…¶ä»–è¡¨å•æ‰€æœ‰æ•°æ®ç»è¿‡ç®—æ³•è®¡ç®—åå¾—å‡ºçš„æ•°æ®æ ¡éªŒç </td>
<td>å…¨ç¯‡çš„æœ€éš¾ç‚¹ï¼Œè§åé¢åˆ†æ</td>
</tr>
<tr>
<td>rt</td>
<td>ä¸æ¸…æ¥š</td>
<td>å°†å€¼0.9ä½œä¸ºå¸¸é‡</td>
</tr>
<tr>
<td>dtype</td>
<td>ä»»åŠ¡ç±»å‹</td>
<td>å› ä¸ºæˆ‘ä»¬è¦å®ç°çš„åŠŸèƒ½ä»…æœ‰è§†é¢‘ï¼Œæ‰€ä»¥å°†å€¼Videoä½œä¸ºå¸¸é‡</td>
</tr>
<tr>
<td>_t</td>
<td>æ—¶é—´æˆ³</td>
<td>å¯ä»¥æ·»åŠ å®æ—¶æ—¶é—´æˆ³ï¼Œä¹Ÿå¯ä»¥æ²¿ç”¨ï¼ŒæœåŠ¡ç«¯ä¸ä¼šè¿›è¡Œæ ¡éªŒ</td>
</tr>
</tbody></table>
<p>ä»¥ä¸‹æˆ‘å°†ç»™å‡ºä»¥ä¸Šéƒ¨åˆ†å‚æ•°å«ä¹‰åŠæ¥æºçš„ä»£ç ä¾æ®ã€‚</p>
<h4 id="clipTime"><a href="#clipTime" class="headerlink" title="clipTime"></a>clipTime</h4><p><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/29.png" srcset="/img/loading.gif" alt="post_clipTime"></p>
<div class="hljs"><pre><code class="hljs js">clipTime = (params.startTime || <span class="hljs-string">"0"</span>) + <span class="hljs-string">"_"</span> + (params.endTime || params.duration);</code></pre></div>
<p>ä»¥ä¸Šæ˜¯æºä»£ç ï¼Œä¸éš¾çœ‹æ‡‚ï¼ŒclipTimeçš„å€¼æ˜¯ èµ·å§‹æ—¶é—´æˆ–â€0â€ + â€œ_â€  + ç»ˆæ­¢æ—¶é—´æˆ–duration ã€‚</p>
<h4 id="isdrag"><a href="#isdrag" class="headerlink" title="isdrag"></a>isdrag</h4><p><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/30.png" srcset="/img/loading.gif" alt="post_isdrag"></p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isdrag = <span class="hljs-number">0</span>;
<span class="hljs-keyword">switch</span> (evt) &#123;
<span class="hljs-keyword">case</span> <span class="hljs-string">"play"</span>:
    isdrag = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">break</span>;
<span class="hljs-keyword">case</span> <span class="hljs-string">"pause"</span>:
    isdrag = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">break</span>;
<span class="hljs-keyword">case</span> <span class="hljs-string">"ended"</span>:
    isdrag = <span class="hljs-number">4</span>;
    <span class="hljs-keyword">break</span>
&#125;</code></pre></div>
<p>å› ä¸ºæˆ‘ä»¬è¦å®Œæˆä»»åŠ¡ï¼Œè‡ªç„¶æ˜¯è§†é¢‘æ’­æ”¾å®Œç»“æŸåå‘é€çš„åŒ…ï¼Œæ‰€ä»¥ä¸ºendedï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨â€œ4â€ä½œä¸ºå¸¸é‡å€¼ã€‚</p>
<h4 id="rt"><a href="#rt" class="headerlink" title="rt"></a>rt</h4><p><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/31.png" srcset="/img/loading.gif" alt="post_rt"></p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">var</span> rt = data ? (data.rt ? data.rt : <span class="hljs-number">0.9</span>) : <span class="hljs-number">0.9</span>;</code></pre></div>
<p>æ²¡å­¦è¿‡jsçš„æˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šè¿™æ®µè¯çš„å…·ä½“ä½œç”¨ï¼Œä¸è¿‡æˆ‘ä»¬æŠŠâ€œ0.9â€ä½œä¸ºå¸¸é‡ä¼ è¾“ä¸ä¼šæœ‰ä»»ä½•å¼‚å¸¸ã€‚<br>è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼Œå°±æ˜¯å½“æˆ‘ä»¬å…¨ç«™æ£€ç´¢â€œrtâ€æ—¶å› ä¸ºå­—ç¬¦æ•°è¾ƒå°‘ï¼Œä¼šå‡ºç°è¾ƒå¤šçš„ç»“æœï¼ˆå› ä¸ºå¾ˆå¤šå‡½æ•°æˆ–å˜é‡é‡Œéƒ½ä¼šåŒ…å«è¿™ä¸¤ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æœç´¢ rt çš„å®šä¹‰è¯­å¥â€”â€”â€œvar rtâ€ï¼Œå³å¯å‡å°‘ç»“æœã€‚</p>
<h4 id="enc"><a href="#enc" class="headerlink" title="enc"></a>enc</h4><p>å…¨æ–‡çš„æœ€éš¾ç‚¹ï¼Œä»¥ä¸Šæ‰€æœ‰æ•°æ®çš„æ ¡éªŒç ã€‚ä»¥ä¸‹å°†ç»™å‡ºæˆ‘ä¸ªäººå°è¯•ç ´è§£çš„è¯¦ç»†æ€è·¯ã€‚<br>é¦–å…ˆæˆ‘é€‰æ‹©å…¨ç«™æ£€ç´¢encï¼Œå°è¯•æ‰¾åˆ°å®ƒçš„ç”±æ¥ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/32.png" srcset="/img/loading.gif" alt="post_enc_1"><br>å¯ä»¥çœ‹åˆ°ï¼Œå‡ºç°äº†å¾ˆå¤šçš„æ•°æ®ï¼ˆ15ä¸ªæ–‡ä»¶å…±77è¡ŒåŒ¹é…ï¼‰ï¼Œæ‰€ä»¥ä¸ºäº†ç¼©å°èŒƒå›´ï¼Œæˆ‘å°è¯•è·Ÿä¸Šé¢çš„rtä¸€æ ·æ“ä½œï¼ŒæŸ¥è¯¢encçš„èµ‹å€¼è¯­å¥ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/33.png" srcset="/img/loading.gif" alt="post_enc_2"><br>å¾ˆæœ‰æ•ˆæœï¼Œç»“æœåªæœ‰4ä¸ªæ–‡ä»¶5è¡ŒåŒ¹é…ã€‚è€Œå¦‚å›¾çº¢è‰²åœˆèµ·æ¥çš„ä»£ç ï¼Œè™½ç„¶éƒ½å¯¹encè¿›è¡Œäº†èµ‹å€¼ï¼Œä½†éƒ½ä¸æ˜¯æˆ‘ä»¬è¦çš„è¯­å¥ã€‚æˆ‘ä»¬ä¸€ä¸ªä¸ªæ‰‹åŠ¨æ’é™¤ï¼Œæœ€åæˆ‘é”å®šäº† <a href="https://mooc1-2.chaoxing.com/ananas/videojs-ext/videojs-ext.min.js" target="_blank" rel="noopener">https://mooc1-2.chaoxing.com/ananas/videojs-ext/videojs-ext.min.js</a> è¿™ä¸ªæ–‡ä»¶ï¼Œç»†å¿ƒçš„æœ‹å‹å¯èƒ½å·²ç»å‘ç°äº†ï¼Œå°±æ˜¯æˆ‘ä»¬åˆšæ‰æ‰¾clipTimeçš„é‚£ä¸ªåœ°æ–¹ã€‚</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">var</span> sendLog_ = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">player, isdrag, currentTimeSec, callback</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (!params.reportUrl) &#123;
        <span class="hljs-keyword">return</span>
    &#125;
    <span class="hljs-keyword">if</span> (params.isFiled == <span class="hljs-number">1</span> || params.state == <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">return</span>
    &#125;
    <span class="hljs-keyword">var</span> format = <span class="hljs-string">"[&#123;0&#125;][&#123;1&#125;][&#123;2&#125;][&#123;3&#125;][&#123;4&#125;][&#123;5&#125;][&#123;6&#125;][&#123;7&#125;]"</span>
      , clipTime = (params.startTime || <span class="hljs-string">"0"</span>) + <span class="hljs-string">"_"</span> + (params.endTime || params.duration);
    <span class="hljs-keyword">var</span> enc = Ext.String.format(format, params.clazzId, params.userid, params.jobid || <span class="hljs-string">""</span>, params.objectId, currentTimeSec * <span class="hljs-number">1000</span>, <span class="hljs-string">"d_yHJ!$pdA~5"</span>, params.duration * <span class="hljs-number">1000</span>, clipTime);
    <span class="hljs-keyword">var</span> rurl = [params.reportUrl, <span class="hljs-string">"/"</span>, params.dtoken, <span class="hljs-string">"?clazzId="</span>, params.clazzId, <span class="hljs-string">"&amp;playingTime="</span>, currentTimeSec, <span class="hljs-string">"&amp;duration="</span>, params.duration, <span class="hljs-string">"&amp;clipTime="</span>, clipTime, <span class="hljs-string">"&amp;objectId="</span>, params.objectId, <span class="hljs-string">"&amp;otherInfo="</span>, params.otherInfo, <span class="hljs-string">"&amp;jobid="</span>, params.jobid, <span class="hljs-string">"&amp;userid="</span>, params.userid, <span class="hljs-string">"&amp;isdrag="</span>, isdrag, <span class="hljs-string">"&amp;view=pc"</span>, <span class="hljs-string">"&amp;enc="</span>, md5(enc), <span class="hljs-string">"&amp;rt="</span>, params.rt, <span class="hljs-string">"&amp;dtype=Video"</span>, <span class="hljs-string">"&amp;_t="</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()].join(<span class="hljs-string">""</span>);
    logFunc(player, rurl, callback)
&#125;;</code></pre></div>
<p>æŠŠé‡Œé¢å…³äºencçš„ä»£ç æå–å‡ºæ¥</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">var</span> format = <span class="hljs-string">"[&#123;0&#125;][&#123;1&#125;][&#123;2&#125;][&#123;3&#125;][&#123;4&#125;][&#123;5&#125;][&#123;6&#125;][&#123;7&#125;]"</span>

<span class="hljs-keyword">var</span> enc = Ext.String.format(format, params.clazzId, params.userid, params.jobid || <span class="hljs-string">""</span>, params.objectId, currentTimeSec * <span class="hljs-number">1000</span>, <span class="hljs-string">"d_yHJ!$pdA~5"</span>, params.duration * <span class="hljs-number">1000</span>, clipTime);

<span class="hljs-string">"&amp;enc="</span>, md5(enc)</code></pre></div>
<p>å¤§è‡´æ„æ€å°±æ˜¯ä»¤</p>
<blockquote>
<p>enc=[clazzId][userid][jobid][objectId][currentTimeSec * 1000][â€œd_yHJ!$pdA~5â€][duration * 1000][clipTime]  </p>
</blockquote>
<p>ç„¶åå†å°†å–encçš„md5ï¼Œä½œä¸ºè¡¨å•çš„æ ¡éªŒç ã€‚è¿™é‡Œé¢çš„å‚æ•°å¤šæ˜¯å‰é¢å·²ç»åˆ†æè¿‡äº†çš„ï¼Œåªæ˜¯ä¸­é—´å¤šäº†ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ &quot;d_yHJ!$pdA~5&quot; ã€‚è¿˜æœ‰ä¸€ä¸ªå¯èƒ½ä¸å¤ªæ¸…æ¥šçš„å°±æ˜¯currentTimeSecäº†ã€‚<br>æˆ‘ä»¬è®¾ç½®æ–­ç‚¹ï¼Œä¸€è¾¹çœ‹çœ‹è¿™ä¸ªcurrentTimeSecåˆ°åº•æ˜¯å•¥ï¼Œé¡ºä¾¿éªŒè¯ä¸‹æˆ‘ä»¬å‰é¢çš„æ˜¯å¦æ­£ç¡®ã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/34.png" srcset="/img/loading.gif" alt="html_pause"><br>åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼Œç„¶åæˆ‘ä»¬åˆ·æ–°åé‡æ–°æ’­æ”¾è§†é¢‘ã€‚å°†é¼ æ ‡ç§»åˆ°encå¤„ï¼Œå³å¯çœ‹åˆ°encçš„å€¼é¢„è§ˆã€‚<br><img src="https://cdn.jsdelivr.net/gh/liuyunfz/picgo_pictures/chaoxing/35.png" srcset="/img/loading.gif" alt="html_enc">è¿™é‡Œå› ä¸ºéšç§é—®é¢˜åšæ‰“ç å¤„ç†ï¼Œå¯ä»¥è‡ªå·±å°è¯•ï¼Œå’Œæˆ‘ä»¬å‰é¢è¯´çš„åŸºæœ¬æ— äºŒã€‚è€ŒcurrentTimeSecæˆ‘ä»¬ä¹Ÿå‘ç°äº†ï¼ŒcurrentTimeSec * 1000è·Ÿ duration * 1000 çš„å€¼ä¸€æ¨¡ä¸€æ ·ã€‚<br>æˆªæ­¢ç›®å‰ï¼Œæ•°æ®åŒ…é‡Œé¢çš„æ‰€æœ‰å‚æ•°æˆ‘ä»¬å·²ç»éƒ½å¼„æ˜ç™½äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å†™ä»£ç å°±å¥½äº†ã€‚</p>
<h3 id="ä»£ç ä¹¦å†™"><a href="#ä»£ç ä¹¦å†™" class="headerlink" title="ä»£ç ä¹¦å†™"></a>ä»£ç ä¹¦å†™</h3><p>ä»¥ä¸‹æ˜¯encçš„è¿”å›å‡½æ•°</p>
<div class="hljs"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">encode_enc</span><span class="hljs-params">(clazzid:str,duration:int,objectId:str,otherinfo:str,jobid:str,userid:str)</span>:</span>
    <span class="hljs-keyword">import</span> hashlib
    data=<span class="hljs-string">"[&#123;0&#125;][&#123;1&#125;][&#123;2&#125;][&#123;3&#125;][&#123;4&#125;][&#123;5&#125;][&#123;6&#125;][0_&#123;7&#125;]"</span>.format(clazzid,userid,jobid,objectId,duration*<span class="hljs-number">1000</span>,<span class="hljs-string">"d_yHJ!$pdA~5"</span>,duration*<span class="hljs-number">1000</span>,duration)
    print(data)
    <span class="hljs-keyword">return</span> hashlib.md5(data.encode()).hexdigest()</code></pre></div>
<p>ç„¶åæ˜¯æ•°æ®åŒ…çš„ä»£ç </p>
<div class="hljs"><pre><code class="hljs python"><span class="hljs-keyword">if</span> video_item.get(<span class="hljs-string">"isPassed"</span>) == <span class="hljs-literal">True</span>:
    <span class="hljs-keyword">pass</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">if</span> video_item.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"video"</span>:
        objectId=video_item.get(<span class="hljs-string">"objectId"</span>)
        otherInfo=video_item.get(<span class="hljs-string">"otherInfo"</span>)
        jobid=video_item.get(<span class="hljs-string">"jobid"</span>)
        name=video_item.get(<span class="hljs-string">'property'</span>).get(<span class="hljs-string">'name'</span>)
        status_url=<span class="hljs-string">"https://mooc1-1.chaoxing.com/ananas/status/&#123;&#125;?k=&amp;flag=normal&amp;_dc=1600850935908"</span>.format(objectId)
        status_rsp=requests.get(url=status_url,headers=class_headers)
        status_json=json.loads(status_rsp.text)
        duration=status_json.get(<span class="hljs-string">'duration'</span>)
        dtoken=status_json.get(<span class="hljs-string">'dtoken'</span>)
        print(objectId,otherInfo,jobid,uid,name,duration,reportUrl)
        multimedia_headers=&#123;
            <span class="hljs-string">'Accept'</span>:<span class="hljs-string">'*/*'</span>,
            <span class="hljs-string">'Accept-Encoding'</span>:<span class="hljs-string">'gzip, deflate, br'</span>,
            <span class="hljs-string">'Accept-Language'</span>:<span class="hljs-string">'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'</span>,
            <span class="hljs-string">'Connection'</span>:<span class="hljs-string">'keep-alive'</span>,
            <span class="hljs-string">'Content-Type'</span>:<span class="hljs-string">'application/json'</span>,
            <span class="hljs-string">'Cookie'</span>:cookieStr,
            <span class="hljs-string">'Host'</span>:<span class="hljs-string">'mooc1-1.chaoxing.com'</span>,
            <span class="hljs-string">'Referer'</span>:<span class="hljs-string">'https://mooc1-1.chaoxing.com/ananas/modules/video/index.html?v=2020-0907-1546'</span>,
            <span class="hljs-string">'Sec-Fetch-Dest'</span>:<span class="hljs-string">'empty'</span>,
            <span class="hljs-string">'Sec-Fetch-Mode'</span>:<span class="hljs-string">'cors'</span>,
            <span class="hljs-string">'Sec-Fetch-Site'</span>:<span class="hljs-string">'same-origin'</span>,
            <span class="hljs-string">'User-Agent'</span>:<span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36 Edg/85.0.564.51'</span>
        &#125;
        <span class="hljs-keyword">import</span> time
        elses=<span class="hljs-string">"/&#123;0&#125;?clazzId=&#123;1&#125;&amp;playingTime=&#123;2&#125;&amp;duration=&#123;2&#125;&amp;clipTime=0_&#123;2&#125;&amp;objectId=&#123;3&#125;&amp;otherInfo=&#123;4&#125;&amp;jobid=&#123;5&#125;&amp;userid=&#123;6&#125;&amp;isdrag=4&amp;view=pc&amp;enc=&#123;7&#125;&amp;rt=0.9&amp;dtype=Video&amp;_t=&#123;8&#125;"</span>.format(dtoken,chapter_data.get(<span class="hljs-string">'clazzid'</span>)[<span class="hljs-number">0</span>],duration,objectId,otherInfo,jobid,uid,encode_enc(chapter_data.get(<span class="hljs-string">'clazzid'</span>)[<span class="hljs-number">0</span>],duration,objectId,otherInfo,jobid,uid),int(time.time()*<span class="hljs-number">1000</span>))
        reportUrl_item=reportUrl+str(elses)
        print(reportUrl_item)
        multimedia_rsp=requests.get(url=reportUrl_item,headers=multimedia_headers)
        print(multimedia_rsp.text)</code></pre></div>
<h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>æˆªæ­¢è‡³æ­¤ï¼Œå·²ç»æ˜¯2020/11/20 22:59:16 ï¼Œè¿™ç¯‡æ–‡ç« è¿˜æ˜¯æ–­æ–­ç»­ç»­å†™äº†å¾ˆä¹…ã€‚é‡Œé¢æˆ‘å°½å¯èƒ½å±•ç¤ºäº†æˆ‘çš„æ€è·¯ã€‚æ¯ä¸€ä¸ªåŠŸèƒ½çš„å®ç°éƒ½å­˜åœ¨ä¸€å®šçš„éš¾åº¦æ€§ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾ˆå€¼å¾—è®°å½•ä¸åˆ†äº«çš„ã€‚å¦‚æœä½ ä»æœ‰ä»€ä¹ˆç–‘é—®ï¼Œæˆ–è€…æˆ‘å“ªé‡Œè¡¨è¾¾è¾ƒä¸ºå«ç³Šï¼Œæ‚¨éƒ½å¯ä»¥åœ¨ä¸‹æ–¹ç›´æ¥è¯„è®ºï¼Œæˆ–è€…ç›´æ¥è”ç³»æˆ‘ã€‚<br>æœ€åå†æ¬¡å¼ºè°ƒï¼Œæœ¬æ–‡ä»…ä½œä¸ºç»éªŒåˆ†äº«ï¼Œè¯·å‹¿å°†å…¶ä¸­å†…å®¹äºŒæ¬¡ä¿®æ”¹ç”¨ä½œå•†ä¸šç”¨é€”ã€‚å¦‚æœ‰ä¾µæƒä¹Ÿè¯·è”ç³»æˆ‘åˆ é™¤ã€‚<br>æœ€åæœ¬æ–‡çš„å…¨éƒ¨ä»£ç å·²è¢«æˆ‘æ•´åˆä¸Šä¼ åˆ°äº†GitHubï¼Œè¯¦ç»†è¯·ç§»æ­¥æˆ‘çš„ä»“åº“ <a href="https://github.com/liuyunfz/chaoxing_tool" target="_blank" rel="noopener">chaoxing_tool</a> ,å¦‚æœä¸ä»‹æ„çš„è¯å¯ä»¥ç»™æˆ‘ä¸ªstaræ”¯æŒä¸‹ã€‚</p>

          </article>

            
              <! -- æ·»åŠ æèµ å›¾æ ‡ -->
<div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <a id="btn_donate" class="btn_donate" href="javascript:;" title="æ‰“èµ"></a>
      </div>  
	<div id="donate_guide" class="donate_bar center hidden" style="background-color: aqua; padding: 40px; height: 290px;">
		<!-- æ”¯ä»˜å®æ‰“èµå›¾æ¡ˆ -->
		<img src="/img/mix_pay.png" srcset="/img/loading.gif" alt="æ”¯ä»˜å®" style="margin-top: 0px;"> <br>
		<a>æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</a>
		<!-- å¾®ä¿¡æ‰“èµå›¾æ¡ˆ -->
		<!--img src="/img/weixin.jpg" alt="å¾®ä¿¡æ‰“èµ" -->  
    </div>
	<script type="text/javascript">
		document.getElementById('btn_donate').onmousemove = function(){			
			$('#donate_guide').removeClass('hidden');
		}
		document.getElementById('btn_donate').onmouseleave = function(){
			$('#donate_guide').addClass('hidden');
		}
	</script>
</div>


            


            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E6%95%99%E7%A8%8B/">æ•™ç¨‹</a>
                    
                      <a class="hover-with-bg" href="/tags/python/">python</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="nofollow noopener noopener" style="text-decoration:underline;">CC BY-NC-SA</a> 4.0åè®® ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/tutorial/windows-menu-new.html">
                        <span class="hidden-mobile">è‡ªå®šä¹‰å³é”®æ–°å»ºé€‰é¡¹</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
              <!-- Comments -->
              <hr>
              <div style="padding: 50px 0 0 0;">
                <div style="font-size: large; float: left;"><u>å‘è¡¨è¯„è®º</u>ï¼š</div>
                <div style="box-sizing: border-box; float: right; cursor: pointer; color: #40aadce1;" onclick="window.open('/comments')">ã€Šè¯„è®ºé¡»çŸ¥ã€‹</div>
              </div>
              <div class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script defer src="https://cdn.staticfile.org/valine/1.4.5/Valine.min.js" ></script>
  <!--script defer src="https://cdn.staticfile.org/valine/1.4.4/Valine.min.js"></script-->
  

  <script type="text/javascript">
    var oldLoadVa = window.onload;
    window.onload = function () {
      oldLoadVa && oldLoadVa();
      
      new Valine({
        el: "#vcomments",
        app_id: "Omyq3YvoLOd3QOLieeH3Uzl1-MdYXbMMI",
        app_key: "JIO0OiAqSJIVM5ouVcEfbdU6",
        placeholder: "è¯·ç•™ä¸‹æ‚¨çš„æ­£ç¡®é‚®ç®±åœ°å€ï¼Œæ–¹ä¾¿æˆ‘å¯¹æ‚¨è¿›è¡Œå›å¤é€šçŸ¥ï¼Œè°¢è°¢ã€‚",
        path: window.location.pathname,
        avatar: "retro",
        meta: ["nick","mail","link"],
        pageSize: "10",
        lang: "zh-CN",
        highlight: false,
        recordIP: false,
        serverURLs: "",
        emojiCDN: 'https://cdn.jsdelivr.net/gh/liuyunfz/liuyunfz.github.io/emoji/', 
        // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
        emojiMaps: {
          "blh" : "blh.png" ,
          "bll" : "bll.png" ,
          "bln" : "bln.png" ,
          "bo9" : "bo9.png" ,
          "bok" : "bok.png" ,
          "bpj" : "bpj.png" ,
          "bpq" : "bpq.png" ,
          "bps" : "bps.png" ,
          "bpw" : "bpw.png" ,
          "brs" : "brs.png" ,
          "f071" : "f071.png" ,
          "tv_doge" : "tv_doge.png" ,
          "tv_äº²äº²" : "tv_äº²äº².png" ,
          "tv_å·ç¬‘" : "tv_å·ç¬‘.png" ,
          "tv_å†è§" : "tv_å†è§.png" ,
          "tv_å†·æ¼ " : "tv_å†·æ¼ .png" ,
          "tv_å‘æ€’" : "tv_å‘æ€’.png" ,
          "tv_å‘è´¢" : "tv_å‘è´¢.png" ,
          "tv_å¯çˆ±" : "tv_å¯çˆ±.png" ,
          "tv_åè¡€" : "tv_åè¡€.png" ,
          "tv_å‘†" : "tv_å‘†.png" ,
          "tv_å‘•å" : "tv_å‘•å.png" ,
          "tv_å›°" : "tv_å›°.png" ,
          "tv_åç¬‘" : "tv_åç¬‘.png" ,
          "tv_å¤§ä½¬" : "tv_å¤§ä½¬.png" ,
          "tv_å¤§å“­" : "tv_å¤§å“­.png" ,
          "tv_å§”å±ˆ" : "tv_å§”å±ˆ.png" ,
          "tv_å®³ç¾" : "tv_å®³ç¾.png" ,
          "tv_å°´å°¬" : "tv_å°´å°¬.png" ,
          "tv_å¾®ç¬‘" : "tv_å¾®ç¬‘.png" ,
          "tv_æ€è€ƒ" : "tv_æ€è€ƒ.png" ,
          "tv_æƒŠå“" : "tv_æƒŠå“.png" ,
          "tv_æ‰“è„¸" : "tv_æ‰“è„¸.png" ,
          "tv_æŠ“ç‹‚" : "tv_æŠ“ç‹‚.png" ,
          "tv_æŠ é¼»" : "tv_æŠ é¼».png" ,
          "tv_æ–œçœ¼ç¬‘" : "tv_æ–œçœ¼ç¬‘.png" ,
          "tv_æ— å¥ˆ" : "tv_æ— å¥ˆ.png" ,
          "tv_æ™•" : "tv_æ™•.png" ,
          "tv_æµæ±—" : "tv_æµæ±—.png" ,
          "tv_æµæ³ª" : "tv_æµæ³ª.png" ,
          "tv_æµé¼»è¡€" : "tv_æµé¼»è¡€.png" ,
          "tv_ç‚¹èµ" : "tv_ç‚¹èµ.png" ,
          "tv_ç”Ÿæ°”" : "tv_ç”Ÿæ°”.png" ,
          "tv_ç”Ÿç—…" : "tv_ç”Ÿç—….png" ,
          "tv_ç–‘é—®" : "tv_ç–‘é—®.png" ,
          "tv_ç™½çœ¼" : "tv_ç™½çœ¼.png" ,
          "tv_çš±çœ‰" : "tv_çš±çœ‰.png" ,
          "tv_ç›®çªå£å‘†" : "tv_ç›®çªå£å‘†.png" ,
          "tv_ç¡ç€" : "tv_ç¡ç€.png" ,
          "tv_ç¬‘å“­" : "tv_ç¬‘å“­.png" ,
          "tv_è…¼è…†" : "tv_è…¼è…†.png" ,
          "tv_è‰²" : "tv_è‰².png" ,
          "tv_è°ƒä¾ƒ" : "tv_è°ƒä¾ƒ.png" ,
          "tv_è°ƒçš®" : "tv_è°ƒçš®.png" ,
          "tv_é„™è§†" : "tv_é„™è§†.png" ,
          "tv_é—­å˜´" : "tv_é—­å˜´.png" ,
          "tv_éš¾è¿‡" : "tv_éš¾è¿‡.png" ,
          "tv_é¦‹" : "tv_é¦‹.png" ,
          "tv_é¬¼è„¸" : "tv_é¬¼è„¸.png" ,
          "tv_é»‘äººé—®å·" : "tv_é»‘äººé—®å·.png" ,
          "tv_é¼“æŒ" : "tv_é¼“æŒ.png" ,
          "åŠ¨è€³æœµ" : "åŠ¨è€³æœµ.gif" ,
          "å“­å”§å”§" : "å“­å”§å”§.gif" ,
          "å“­æ³£" : "å“­æ³£.png" ,
          "å°´å°¬" : "å°´å°¬.png" ,
          "å¼€è½¦" : "å¼€è½¦.gif" ,
          "æ‰“ç¯®çƒ" : "æ‰“ç¯®çƒ.gif" ,
            // ... æ›´å¤šè¡¨æƒ…
        } ,
        mathJax: false
      });     
    };
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://valine.js.org" target="_blank" rel="nofollow noopener noopener">comments
      powered by Valine.</a></noscript>


              </div>
            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    

    
  <!-- å¤‡æ¡ˆä¿¡æ¯ -->
  <div>
    <a href="http://beian.miit.gov.cn/" target="_blank" class="beian-icp"
       rel="nofollow noopener">æµ™ICPå¤‡20012672å·</a>
    
  </div>


    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/main.js" ></script>


  <script  src="/js/lazyload.js" ></script>



  
  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '.post-content',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 3,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>





  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>



  
<script src="/js/music.js"></script>



<!-- Plugins -->


  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?6589921a3cfb700a2ddaced6d4dc6c54";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "è¶…æ˜Ÿå­¦ä¹ é€šç½‘è¯¾åˆ†æ&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>


















</body>
</html>
